version: "3.0"
services:
  mysql:
    build: ./_docker_/cabane/mysql
    image: mysql:solight
    environment:
     - MYSQL_ROOT_PASSWORD=solight
    ports:
     - "3306:3306"
    volumes:
     - my_data:/var/lib/mysql
     - .:/sites

  php:
    build: ./_docker_/cab/php7
    image: php:7-pdo
    volumes:
     - ./_docker_/cabane/php.ini:/usr/local/etc/php/conf.d/customizations.ini
     - ../Phink/src/phink:/usr/local/lib/php/phink
    links:
     - mysql:db

  sol:
    hostname: sol.loc
    image: nginx:latest
    ports:
     - "80:80"
    volumes:
     - ./SoL/src:/site
     - ./SoL/nginx.conf:/etc/nginx/conf.d/default.conf
    links:
     - php:php
     - mysql:db

  ladmin:
    hostname: ladmin.loc
    image: nginx:latest
    ports:
     - "8000:80"
    volumes:
     - ./LAdmin/src:/site
     - ./LAdmin/nginx.conf:/etc/nginx/conf.d/default.conf
    links:
     - php:php
     - mysql:db

volumes:
  my_data:

